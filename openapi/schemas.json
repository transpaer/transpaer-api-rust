{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$defs": {
    "id": {
      "description": "ID of a resource.",
      "type": "string",
      "maxLength": 32
    },
    "organisationIds": {
      "description": "IDs of an organisation.",
      "type": "object",
      "properties": {
        "wiki": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        },
        "vat": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        },
        "domains": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        }
      }
    },
    "organisationIdVariant": {
      "description": "Enumerates organisation ID variants.",
      "type": "string",
      "enum": [
        "wiki",
        "vat",
        "www"
      ]
    },
    "productIds": {
      "description": "IDs of a product.",
      "type": "object",
      "properties": {
        "eans": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        },
        "gtins": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        },
        "wiki": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/id"
          }
        }
      }
    },
    "productIdVariant": {
      "description": "Enumerates product ID variants.",
      "type": "string",
      "enum": [
        "ean",
        "gtin",
        "wiki"
      ]
    },
    "organisationLink": {
      "type": "object",
      "properties": {
        "organisation_id_variant": {
          "$ref": "#/$defs/organisationIdVariant"
        },
        "id": {
          "$ref": "#/$defs/id"
        }
      },
      "required": [
        "organisation_id_variant",
        "id"
      ]
    },
    "productLink": {
      "type": "object",
      "properties": {
        "product_id_variant": {
          "$ref": "#/$defs/productIdVariant"
        },
        "id": {
          "$ref": "#/$defs/id"
        }
      },
      "required": [
        "product_id_variant",
        "id"
      ]
    },
    "category": {
      "description": "ID of a category.",
      "type": "string"
    },
    "accuracy": {
      "description": "Match accuracy.",
      "type": "number",
      "format": "double",
      "minimum": 0.0,
      "maximum": 1.0
    },
    "mention": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "link": {
          "type": "string"
        }
      },
      "required": [
        "title",
        "link"
      ]
    },
    "medium": {
      "type": "object",
      "properties": {
        "mentions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/mention"
          }
        },
        "icon": {
          "type": "string"
        }
      },
      "required": [
        "mentions"
      ]
    },
    "dataSource": {
      "description": "Describes where the related data was retrieved from.",
      "type": "string",
      "enum": [
        "transpaer",
        "wiki",
        "off",
        "eu",
        "b_corp",
        "fti",
        "tco",
        "other"
      ]
    },
    "regionCode": {
      "description": "Code of a region.",
      "type": "string",
      "minLength": 3,
      "maxLength": 3
    },
    "shortString": {
      "description": "Short string for labels, titles, summaries...",
      "type": "string",
      "maxLength": 1024
    },
    "longString": {
      "description": "Long string for descriptions, articles...",
      "type": "string",
      "maxLength": 1048576
    },
    "shortText": {
      "description": "Short text with its source.",
      "type": "object",
      "properties": {
        "text": {
          "$ref": "#/$defs/shortString"
        },
        "source": {
          "$ref": "#/$defs/dataSource"
        }
      },
      "required": [
        "text",
        "source"
      ]
    },
    "longText": {
      "description": "Long text with its source.",
      "type": "object",
      "properties": {
        "text": {
          "$ref": "#/$defs/longString"
        },
        "source": {
          "$ref": "#/$defs/dataSource"
        }
      },
      "required": [
        "text",
        "source"
      ]
    },
    "image": {
      "description": "Image path/URL with its source.",
      "type": "object",
      "properties": {
        "image": {
          "type": "string"
        },
        "source": {
          "$ref": "#/$defs/dataSource"
        }
      },
      "required": [
        "image",
        "source"
      ]
    },
    "presentationEntry": {
      "description": "An entry in a presentation.",
      "type": "object",
      "properties": {
        "wiki_id": {
          "$ref": "#/$defs/id"
        },
        "name": {
          "$ref": "#/$defs/shortString"
        },
        "score": {
          "type": "integer"
        }
      },
      "required": [
        "wiki_id",
        "name",
        "score"
      ]
    },
    "presentation": {
      "description": "Additional data to present together with a library item.",
      "type": "object",
      "properties": {
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/presentationEntry"
          }
        }
      },
      "required": [
        "data"
      ]
    },
    "referenceLink": {
      "description": "A reference link",
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "link": {
          "type": "string"
        }
      },
      "required": [
        "title",
        "link"
      ]
    },
    "libraryTopic": {
      "description": "Name of a topic in the library.",
      "type": "string",
      "enum": [
        "wiki",
        "open_food_facts",
        "bcorp",
        "eu_ecolabel",
        "tco",
        "fti"
      ]
    },
    "libraryItemShort": {
      "description": "Short summary of a library item.",
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/$defs/libraryTopic"
        },
        "title": {
          "$ref": "#/$defs/shortString"
        },
        "summary": {
          "$ref": "#/$defs/shortString"
        }
      },
      "required": [
        "id",
        "title",
        "summary"
      ]
    },
    "libraryItemFull": {
      "description": "Full contents of a library item.",
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/$defs/libraryTopic"
        },
        "title": {
          "$ref": "#/$defs/shortString"
        },
        "summary": {
          "$ref": "#/$defs/shortString"
        },
        "article": {
          "$ref": "#/$defs/longString"
        },
        "links": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/referenceLink"
          }
        },
        "presentation": {
          "$ref": "#/$defs/presentation"
        }
      },
      "required": [
        "id",
        "title",
        "summary",
        "article",
        "links"
      ]
    },
    "libraryContents": {
      "description": "List of all items in the library.",
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/libraryItemShort"
          }
        }
      },
      "required": [
        "items"
      ]
    },
    "transpaerScoreCategory": {
      "description": "Categories in the transpaer score",
      "type": "string",
      "enum": [
        "dataAvailability",
        "producerKnown",
        "productionPlaceKnown",
        "idKnown",
        "categoryAssigned",
        "category",
        "warrantyLength",
        "numCerts",
        "atLeastOneCert",
        "atLeastTwoCerts"
      ]
    },
    "transpaerScoreBranch": {
      "description": "Part of explanation of calculation of the Transpaer score.",
      "type": "object",
      "properties": {
        "category": {
          "$ref": "#/$defs/transpaerScoreCategory"
        },
        "weight": {
          "type": "integer"
        },
        "score": {
          "type": "number",
          "format": "double"
        },
        "branches": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/transpaerScoreBranch"
          }
        }
      },
      "required": [
        "category",
        "weight",
        "score",
        "branches"
      ]
    },
    "transpaerScore": {
      "description": "Explanation of calculation of the Transpaer score.",
      "type": "object",
      "properties": {
        "total": {
          "type": "number",
          "format": "double"
        },
        "tree": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/transpaerScoreBranch"
          }
        }
      },
      "required": [
        "total",
        "tree"
      ]
    },
    "bCorpMedallion": {
      "description": "Details of BCorp evaluation.",
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/$defs/id"
        },
        "report_url": {
          "$ref": "#/$defs/longString"
        }
      },
      "required": [
        "id",
        "report_url"
      ]
    },
    "euEcolabelMedallion": {
      "description": "Details of EU Ecolabel evaluation.",
      "type": "object",
      "properties": {
        "matchAccuracy": {
          "$ref": "#/$defs/accuracy"
        }
      }
    },
    "ftiMedallion": {
      "description": "Details of Fashion Transparency Index evaluation.",
      "type": "object",
      "properties": {
        "score": {
          "type": "integer",
          "format": "int64"
        }
      },
      "required": [
        "score"
      ]
    },
    "transpaerMedallion": {
      "description": "Details of Transpaer evaluation.",
      "type": "object",
      "properties": {
        "score": {
          "$ref": "#/$defs/transpaerScore"
        }
      },
      "required": [
        "score"
      ]
    },
    "tcoMedallion": {
      "description": "Details of TCO evaluation.",
      "type": "object",
      "properties": {
        "brandName": {
          "$ref": "#/$defs/shortString"
        }
      },
      "required": [
        "brandName"
      ]
    },
    "medallionVariant": {
      "description": "Medallion variant.",
      "type": "string",
      "enum": [
        "bCorp",
        "euEcolabel",
        "fti",
        "transpaer",
        "tco"
      ]
    },
    "badgeName": {
      "description": "Name of a badge.",
      "type": "string",
      "enum": [
        "bcorp",
        "eu",
        "tco"
      ]
    },
    "scorerName": {
      "description": "Name of a scorer.",
      "type": "string",
      "enum": [
        "fti"
      ]
    },
    "score": {
      "description": "score.",
      "type": "object",
      "properties": {
        "scorerName": {
          "$ref": "#/$defs/scorerName"
        },
        "score": {
          "type": "integer",
          "format": "int64"
        }
      },
      "required": [
        "scorerName",
        "score"
      ]
    },
    "medallion": {
      "description": "Combines data from any medallion.",
      "type": "object",
      "properties": {
        "variant": {
          "$ref": "#/$defs/medallionVariant"
        },
        "bcorp": {
          "$ref": "#/$defs/bCorpMedallion"
        },
        "euEcolabel": {
          "$ref": "#/$defs/euEcolabelMedallion"
        },
        "fti": {
          "$ref": "#/$defs/ftiMedallion"
        },
        "transpaer": {
          "$ref": "#/$defs/transpaerMedallion"
        },
        "tco": {
          "$ref": "#/$defs/tcoMedallion"
        }
      },
      "required": [
        "variant"
      ]
    },
    "verifiedShop": {
      "description": "Enumerates verified shops.",
      "type": "string",
      "enum": [
        "fairphone",
        "amazon"
      ]
    },
    "shoppingEntry": {
      "description": "Describes a link to a shop",
      "type": "object",
      "properties": {
        "shop": {
          "$ref": "#/$defs/verifiedShop"
        },
        "link": {
          "type": "string"
        },
        "description": {
          "$ref": "#/$defs/shortString"
        }
      },
      "required": [
        "shop",
        "link",
        "description"
      ]
    },
    "organisationShort": {
      "description": "Extract from organisation data.",
      "type": "object",
      "properties": {
        "organisationIds": {
          "$ref": "#/$defs/organisationIds"
        },
        "name": {
          "$ref": "#/$defs/shortString"
        },
        "description": {
          "$ref": "#/$defs/longText"
        },
        "badges": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/badgeName"
          }
        },
        "scores": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/score"
          }
        }
      },
      "required": [
        "organisationIds",
        "name",
        "badges",
        "scores"
      ]
    },
    "organisationFull": {
      "description": "Full organisation data.",
      "type": "object",
      "properties": {
        "organisationIds": {
          "$ref": "#/$defs/organisationIds"
        },
        "names": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/shortText"
          }
        },
        "descriptions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/longText"
          }
        },
        "images": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/image"
          }
        },
        "websites": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/shortString"
          }
        },
        "origins": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/regionCode"
          }
        },
        "media": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/medium"
          }
        },
        "products": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/productShort"
          }
        },
        "medallions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/medallion"
          }
        }
      },
      "required": [
        "organisationIds",
        "names",
        "descriptions",
        "images",
        "websites",
        "products",
        "medallions"
      ]
    },
    "productShort": {
      "description": "Extract from product data.",
      "type": "object",
      "properties": {
        "productIds": {
          "$ref": "#/$defs/productIds"
        },
        "name": {
          "$ref": "#/$defs/shortString"
        },
        "description": {
          "$ref": "#/$defs/longText"
        },
        "badges": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/badgeName"
          }
        },
        "scores": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/score"
          }
        }
      },
      "required": [
        "productIds",
        "name",
        "badges",
        "scores"
      ]
    },
    "productFull": {
      "description": "Full product data.",
      "type": "object",
      "properties": {
        "productIds": {
          "$ref": "#/$defs/productIds"
        },
        "names": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/shortText"
          }
        },
        "descriptions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/longText"
          }
        },
        "images": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/image"
          }
        },
        "origins": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/regionCode"
          }
        },
        "manufacturers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/organisationShort"
          }
        },
        "alternatives": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/categoryAlternatives"
          }
        },
        "medallions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/medallion"
          }
        },
        "shopping": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/shoppingEntry"
          }
        },
        "media": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/medium"
          }
        }
      },
      "required": [
        "productIds",
        "names",
        "descriptions",
        "images",
        "manufacturers",
        "alternatives",
        "medallions",
        "shopping",
        "media"
      ]
    },
    "categoryAlternatives": {
      "description": "List of product alternative in the given category.",
      "type": "object",
      "properties": {
        "category_id": {
          "type": "string"
        },
        "category_label": {
          "type": "string"
        },
        "alternatives": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/productShort"
          }
        }
      },
      "required": [
        "category_id",
        "category_label",
        "alternatives"
      ]
    },
    "categoryShort": {
      "description": "Short category data.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "label"
      ]
    },
    "categoryFull": {
      "description": "Full category data.",
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "status": {
          "$ref": "#/$defs/categoryStatus"
        },
        "subcategories": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/categoryShort"
          }
        },
        "supercategories": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/categoryShort"
          }
        },
        "products": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/productShort"
          }
        }
      },
      "required": [
        "label",
        "status",
        "products",
        "subcategories",
        "supercategories"
      ]
    },
    "categoryStatus": {
      "description": "Enumerates organisation ID variants.",
      "type": "string",
      "enum": [
        "exploratory",
        "incomplete",
        "satisfactory",
        "complete",
        "broad"
      ]
    },
    "textSearchLink": {
      "description": "Link to a text search result.",
      "type": "object",
      "anyOf": [
        {
          "$ref": "#/$defs/organisationLink"
        },
        {
          "$ref": "#/$defs/productLink"
        }
      ]
    },
    "textSearchLinkHack": {
      "description": "Link to a text search result.",
      "type": "object",
      "properties": {
        "organisation_id_variant": {
          "$ref": "#/$defs/organisationIdVariant"
        },
        "product_id_variant": {
          "$ref": "#/$defs/productIdVariant"
        },
        "id": {
          "$ref": "#/$defs/id"
        }
      },
      "required": [
        "id"
      ]
    },
    "textSearchResult": {
      "description": "An entry in text search results.",
      "type": "object",
      "properties": {
        "link": {
          "$ref": "#/$defs/textSearchLinkHack"
        },
        "label": {
          "$ref": "#/$defs/shortString"
        }
      },
      "required": [
        "link",
        "label"
      ]
    },
    "textSearchResults": {
      "description": "List of results of a text search.",
      "type": "object",
      "properties": {
        "results": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/textSearchResult"
          }
        }
      },
      "required": [
        "results"
      ]
    }
  }
}
